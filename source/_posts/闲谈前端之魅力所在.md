---
title: 解放同事们的双手+闲谈前端之魅力所在
date: 2018-08-05 16:00:11
tags: 随笔
---
从前段时间公司报工制度改了说起。原本一周五天只需要每天报`8`小时就好了，也不是很麻烦，填5个8而已嘛。  

现在，每人每周都有20个左右的任务，要求每一项任务都填写工时，也就是说，每周五报工的时候要填20*5=100多个空空，而且，每天的工时加起来不能超过8小时，我的天，每周五得花费起码20分钟在填这个上面。而且添加的任务大多不是我们自己的，只是公司这么要求，就给我们都加上了，填也只是凑数字凑个8出来。  

作为一名前端工程师，一股使命感油然而生。**我要解放大家的双手！**  
故事就开始了
<!--more-->
思路分析：
1. 每个人一天会有n个任务(所报工时不能小于0.1，也就是说最多80个任务，当然这个并没有什么用，0.1才是关键)
2. n项工时相加等于8，请假扣除相应工时(todo)
3. 尽可能随机，看着不那么统一
4. 综上，写出一段脚本，使得大家每周五只需要点一下便可报工

听起来挺简单，实现起来走了不少弯路  
1. 实现一个生成n项随机数字和为m的数组（每项不得小于0.1，最小精确到小数点后1位）
2. 获取dom，填充，执行click()函数


**首先第一点**

一开始想的是，生成一个看起来尽可能随机的数组，也就是将数字m分割成n份随机数字，且数字精度不得超过小数点后1位。听起来像是以前学的动态规划，这个么emmm......先生成吧，怎么个随机法呢，Math.random()，先分为两份，取随机数字，toFixed(1)，左边减去，右边加上，不就看起来随机了吗，然后再递归取n份，理想是美好的，现实是骨感的。如果m/n恰好是个无限循环小数怎么办(8/11)，如何让两个精度为0.1的数相加等于一个无限循环小数？？？gg  

退而求其次，先解决问题再说，细节先放下，动态规划这块以后要好好看看。得，重新理思路

将m(8)平均分成n份，然后将结果去除小数点后一位之后的数字，然后将结果相加，再用8减去和，得到未分配工时，再随机分配这些！因为操作完之后这n项都是小数点后一位，所以得到的未分配工时肯定也是小数点后一位，每位上减去的数字都在小数点后两位，所以得到的未分配工时除以0.1肯定超不过n。，思路一旦理清，写起来就非常快了，原来上面那个思路花了一个多小时没写出来，这个只用了十几分钟。效果还相当不错。代码在公司电脑上，没有外网很烦，最大的一个问题就是，小数点精度问题！！！虽说可以通过判断a-b<0.00000001来判断a=b，但也未免太麻烦，直接所有数据乘10计算，得出的结果再除以10，完美的避免了精度这个坑，哈哈

**然后第二点，获取dom，填充数据**

不看不知道，不看下一跳，银行的这个页面哦，，里里外外嵌套了5个iframe，还有frameset，frame等等标签，还是用table布局。光是这也就算了，他每个格子所在的位置还都不一样，麻麻有人欺负我，不过这种就不是什么大问题，就是麻烦点嘛，不懈努力之下，终于完成了

**完成之后干啥呢，当然是分享啦**
看到自己可以帮助到这100多号人，当然是非！常！开！心！啦！！！哈哈哈哈哈哈哈哈哈

### 闲谈
或许这就是前端的魅力所在，也是我选择前端的原因，高中时代接触编程，耍linux，写bash脚本，写点c，大学之后接触到c++，Java，使我早已对编程这个东西失去了兴趣，我只是喜欢折腾，对我来说，编程太枯燥了！当我的第一个个人网站winlover论坛建成后，每天忙于各种优化，访问速度慢，百度排名低等等一系列问题，发现只有自己打造网站界面时最开心，什么SEO，运营（当时就是每天去各大网站发广告）等等，再到后来的wordpress，我想我找到了我喜欢的事情，与网络有关，与编程有关，与用户体验有关，通过自己建造一个让用户感觉非常好的网站那种体验真的是妙不可言。  

深入学习前端之后真的是越来越爱不释手，一开始经常会有一些莫名其妙的问题（也是大多数人吐槽js烂的问题），但当你深入了解之后，你会发现，他确实烂。。。但是就是好玩，他就像一个孩子，正在一步一步走上成熟。而且你能感受的到。  

再到后来，绕过网站的禁止复制、禁止粘贴，绕过扫描二维码才能下载资源，再到后来取别人网站接口，做成短信轰炸机（不道义，当然也提建议了），再到可以帮助同事们解放双手，选择js我从来没有后悔过，相信以后也不会后悔的，如果可以，我相信我可以干10年，二十年，当然学习一门后台语言是必须的，目标是Python，因为都是动态语言，当然数据结构和算法得大补了。  

糊里糊涂说了这么多，我想到一个词，叫 不知所云，就是这个感觉